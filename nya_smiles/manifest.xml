<?xml version="1.0" encoding="utf-8"?>
<!--
/*
 * manifest file for topic description
 *
 * @copyright Copyright (C) KANekT @ http://blog.kanekt.ru
 * @license http://www.gnu.org/licenses/gpl.html GPL version 2 or higher
 * Donate Web Money Z104136428007 R346491122688
 * @package topic description
*/
-->
<extension engine="1.0">
	<id>nya_smiles</id>
	<title>Smiles</title>
	<version>0.2.1</version>
	<description>Smiles</description>
	<author>KANekT</author>
	<minversion>1.4.2</minversion>
	<maxtestedon>1.4.2</maxtestedon>
	<hooks>
        <hook id="pun_bbcode_pre_buttons_output"><![CDATA[
			$this->add_button(array('name' => 'smiles', 'onclick' => 'showhide(\'pun_bbcode_smilies\');', 'image' => true));
		]]></hook>

        <hook id="po_pre_post_contents, vt_quickpost_pre_message_box, pun_pm_fn_send_form_pre_textarea_output" priority="10"><![CDATA[
            global $ext_Smilie;
            $smilies = $ext_Smilie->Smiles;
            $text = '<div id="pun_bbcode_smilies">';
            foreach ($smilies as $smile => $prop)
            {
		        $text .= '<a onclick="PUNBB.pun_bbcode.insert_text(\' '.$prop['title'].' \', \'\')"><img src="'.$prop['src'].'"'.(($prop['width'] != NULL) ? ' width="'.$prop['width'].'"' : '').(($prop['height'] != NULL) ? ' height="'.$prop['height'].'"' : '').' alt="'.$prop['title'].'" /></a>'."\n";
            }
			$text .= '</div>';
			echo $text;
		]]></hook>

        <hook id="pun_bbcode_styles_loaded"><![CDATA[
			if ($forum_user['pun_bbcode_use_buttons'] == '1') {

				if (!isset($smiles_styles_loaded )) {
					$smiles_styles_loaded = TRUE;
					if ($forum_user['style'] != 'Oxygen' && file_exists($ext_info['path'].'/css/'.$forum_user['style'].'/pun_bbcode_smiles.min.css')) {
						$forum_loader->add_css($ext_info['url'].'/css/'.$forum_user['style'].'/pun_bbcode_smiles.min.css', array('type' => 'url', 'media' => 'screen'));
					} else {
						// Optimize: inline for Oxygen
						$forum_loader->add_css('#pun_bbcode_bar #pun_bbcode_button_smiles.image{background:url("'.$ext_info['url'].'/css/Oxygen/img/smiles.png")  50% 50% no-repeat;}div#pun_bbcode_smilies{display:none;width:840px;margin-left:220px;}', array('type' => 'inline'));
					}
				}
                $forum_head['js_pun_bbcode_smiles'] = '<script type="text/javascript" src="'.$ext_info['url'].'/js/pun_bbcode_smiles.min.js"></script>';
			}
		]]></hook>

        <hook id="nya_add_smilies"><![CDATA[
			$ext_Smilie->add_Smilie('O:)', $ext_info['url'].'/img/aa.gif');
			$ext_Smilie->add_Smilie(':)', $ext_info['url'].'/img/ab.gif');
			$ext_Smilie->add_Smilie('=)', $ext_info['url'].'/img/ab.gif');
            $ext_Smilie->add_Smilie(':(', $ext_info['url'].'/img/ac.gif');
            $ext_Smilie->add_Smilie('=(', $ext_info['url'].'/img/ac.gif');
            $ext_Smilie->add_Smilie(';)', $ext_info['url'].'/img/ad.gif');
            $ext_Smilie->add_Smilie(':P', $ext_info['url'].'/img/ae.gif');
            $ext_Smilie->add_Smilie(':p', $ext_info['url'].'/img/ae.gif');
            $ext_Smilie->add_Smilie('8)', $ext_info['url'].'/img/af.gif');
            $ext_Smilie->add_Smilie(':D', $ext_info['url'].'/img/ag.gif');
            $ext_Smilie->add_Smilie('=D', $ext_info['url'].'/img/ag.gif');
            $ext_Smilie->add_Smilie(':[', $ext_info['url'].'/img/ah.gif');
            $ext_Smilie->add_Smilie('o_O', $ext_info['url'].'/img/ai.gif');
			$ext_Smilie->add_Smilie(':o', $ext_info['url'].'/img/ai.gif');
			$ext_Smilie->add_Smilie(':O', $ext_info['url'].'/img/ai.gif');
            $ext_Smilie->add_Smilie(':-*', $ext_info['url'].'/img/aj.gif');
            $ext_Smilie->add_Smilie(':\'(', $ext_info['url'].'/img/ak.gif');
            $ext_Smilie->add_Smilie(':-X', $ext_info['url'].'/img/al.gif');
            $ext_Smilie->add_Smilie('>:o', $ext_info['url'].'/img/am.gif');
            $ext_Smilie->add_Smilie(':|', $ext_info['url'].'/img/an.gif');
            $ext_Smilie->add_Smilie('=|', $ext_info['url'].'/img/an.gif');
            $ext_Smilie->add_Smilie(':-/', $ext_info['url'].'/img/ao.gif');
            $ext_Smilie->add_Smilie(':lol:', $ext_info['url'].'/img/ag.gif');
            $ext_Smilie->add_Smilie(':mad:', $ext_info['url'].'/img/ac.gif');
            $ext_Smilie->add_Smilie(':rolleyes:', $ext_info['url'].'/img/ah.gif');
            $ext_Smilie->add_Smilie(':cool:', $ext_info['url'].'/img/af.gif');
            $ext_Smilie->add_Smilie(':/', $ext_info['url'].'/img/ao.gif');
            $ext_Smilie->add_Smilie('*JOKINGLY*', $ext_info['url'].'/img/ap.gif');
            $ext_Smilie->add_Smilie(']:->', $ext_info['url'].'/img/aq.gif');
            $ext_Smilie->add_Smilie('[:}', $ext_info['url'].'/img/ar.gif');
            $ext_Smilie->add_Smilie('*KISSED*', $ext_info['url'].'/img/as.gif');
            $ext_Smilie->add_Smilie(':!', $ext_info['url'].'/img/at.gif');
            $ext_Smilie->add_Smilie(':-~', $ext_info['url'].'/img/at.gif');
            $ext_Smilie->add_Smilie('*TIRED*', $ext_info['url'].'/img/au.gif');
            $ext_Smilie->add_Smilie('*STOP*', $ext_info['url'].'/img/av.gif');
            $ext_Smilie->add_Smilie('*KISSING*', $ext_info['url'].'/img/aw.gif');
            $ext_Smilie->add_Smilie('@}->--', $ext_info['url'].'/img/ax.gif');
            $ext_Smilie->add_Smilie('*THUMBSUP*', $ext_info['url'].'/img/ay.gif');
            $ext_Smilie->add_Smilie('*DRINK*', $ext_info['url'].'/img/az.gif');
            $ext_Smilie->add_Smilie('*INLOVE*', $ext_info['url'].'/img/ba.gif');
            $ext_Smilie->add_Smilie('@=', $ext_info['url'].'/img/bb.gif');
            $ext_Smilie->add_Smilie('*HELP*', $ext_info['url'].'/img/bc.gif');
            $ext_Smilie->add_Smilie('\m\/', $ext_info['url'].'/img/bd.gif');
            $ext_Smilie->add_Smilie('%)', $ext_info['url'].'/img/be.gif');
            $ext_Smilie->add_Smilie('*OK*', $ext_info['url'].'/img/bf.gif');
            $ext_Smilie->add_Smilie('"*WASSUP*', $ext_info['url'].'/img/bg.gif');
            $ext_Smilie->add_Smilie('*SORRY*', $ext_info['url'].'/img/bh.gif');
            $ext_Smilie->add_Smilie('*BRAVO*', $ext_info['url'].'/img/bi.gif');
            $ext_Smilie->add_Smilie('"*ROFL*', $ext_info['url'].'/img/bj.gif');
            $ext_Smilie->add_Smilie('PARDON*', $ext_info['url'].'/img/bk.gif');
            $ext_Smilie->add_Smilie('*NO*', $ext_info['url'].'/img/bl.gif');
            $ext_Smilie->add_Smilie('*CRAZY*', $ext_info['url'].'/img/bm.gif');
            $ext_Smilie->add_Smilie('*DONT_KNOW*', $ext_info['url'].'/img/bn.gif');
            $ext_Smilie->add_Smilie('*DANCE*', $ext_info['url'].'/img/bo.gif');
            $ext_Smilie->add_Smilie('*YAHOO*', $ext_info['url'].'/img/bp.gif');
            $ext_Smilie->add_Smilie('*HI*', $ext_info['url'].'/img/bq.gif');
            $ext_Smilie->add_Smilie('*BYE*', $ext_info['url'].'/img/br.gif');
            $ext_Smilie->add_Smilie('*YES*', $ext_info['url'].'/img/bs.gif');
            $ext_Smilie->add_Smilie(';D', $ext_info['url'].'/img/bt.gif');
            $ext_Smilie->add_Smilie('*WALL*', $ext_info['url'].'/img/bu.gif');
            $ext_Smilie->add_Smilie('*WRITE*', $ext_info['url'].'/img/bv.gif');
            $ext_Smilie->add_Smilie('*SCRATCH*', $ext_info['url'].'/img/bw.gif');
        ]]></hook>
    </hooks>
</extension>
